{"id":"clarigen-0h6","title":"CLI 'call' Command (Cast-like)","description":"Extend the Clarigen CLI with a 'call' command similar to Foundry's 'cast'. Enable calling contract functions directly from the terminal across different networks.","design":"1. CLI Command: `clarigen call \u003ccontract\u003e \u003cfunction\u003e [args...]`.\n2. Support flags for `--network`, `--private-key`, `--rpc-url`.\n3. Robust argument parsing (converting strings to Clarity types).\n4. Display results in terminal with formatting options (JSON, Clarity, raw hex).\n5. Handle both read-only calls and public transactions.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:55:15.506137-08:00","updated_at":"2025-12-17T11:55:15.506137-08:00"}
{"id":"clarigen-1el","title":"TX Builder V2: Two-Column Layout","description":"Refactor from narrow centered column to responsive two-column layout with context panel.","design":"Layout structure:\n- Wide (lg:): CSS grid `grid-cols-[1fr_400px]` or similar\n- Narrow: single column, context panel above form\n\nCreate `ContextPanel` component that renders either:\n- Field helper (Builder mode)\n- Transaction status (Result mode)\n\nMove `TransactionStatus` from inline in route to inside ContextPanel.\n\nKey files:\n- `src/routes/tx.$network.$contractAddress.$functionName.tsx` - grid layout\n- `src/components/tx-builder/context-panel.tsx` - new component\n- `src/components/tx-builder/transaction-status.tsx` - no changes, just moved\n\nContainer: change from `max-w-2xl` to `max-w-6xl` with internal grid.","acceptance_criteria":"- Two columns on lg: screens\n- Single column on smaller screens\n- Transaction status appears in context panel (Result mode)\n- Context panel has placeholder for field helper (Builder mode)","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-12-18T08:41:13.901507-08:00","updated_at":"2025-12-18T08:56:41.025167-08:00","closed_at":"2025-12-18T08:56:41.025167-08:00","close_reason":"Implemented two-column responsive layout with ContextPanel component. Wide screens (lg:) show form on left (~60%) and context panel on right (400px). Narrow screens stack context panel above form. TransactionStatus moved into ContextPanel for Result mode, field helper placeholder shown in Builder mode.","dependencies":[{"issue_id":"clarigen-1el","depends_on_id":"clarigen-t3p","type":"blocks","created_at":"2025-12-18T08:41:13.90464-08:00","created_by":"daemon"},{"issue_id":"clarigen-1el","depends_on_id":"clarigen-f3e","type":"blocks","created_at":"2025-12-18T08:41:38.837418-08:00","created_by":"daemon"}]}
{"id":"clarigen-2hm","title":"Build ClarityValue function arguments on form submission","description":"Convert form values to ClarityValue types when the tx builder form is submitted. Use the function's ABI to properly encode each argument using parseToCV or direct CV constructors.","design":"On form submit:\n1. Get form values (already have from onSubmit handler)\n2. Iterate through func.args from ABI\n3. For each arg, convert form value to ClarityValue:\n   - Use parseToCV(value, arg.type) from @clarigen/core, OR\n   - Use CV constructors from @stacks/transactions directly\n4. Build array of ClarityValues in order\n5. Return/log the encoded arguments\n6. Eventually use for makeContractCall\n\nHandle all types:\n- Primitives: uintCV, intCV, boolCV, principalCV\n- Buffers: bufferCV (from hex)\n- Strings: stringAsciiCV, stringUtf8CV\n- Optional: someCV(inner) or noneCV()\n- List: listCV(items)\n- Tuple: tupleCV(object)\n- Response: responseOkCV(ok) or responseErrorCV(err)","acceptance_criteria":"- Form submission produces array of ClarityValue objects\n- All Clarity types convert correctly from JS values\n- Nested types (optional, list, tuple) handled recursively\n- Conversion errors are caught and displayed\n- Console logs show properly encoded arguments ready for transaction","status":"closed","priority":1,"issue_type":"feature","assignee":"claude","created_at":"2025-12-17T06:56:03.905431-08:00","updated_at":"2025-12-17T07:47:07.41226-08:00","closed_at":"2025-12-17T07:47:07.41226-08:00","close_reason":"Implemented formValuesToFunctionArgs() and formValueToCV() functions to convert form values to ClarityValue types. Handles all Clarity types including primitives, buffers (hex string to Uint8Array), optionals ({ isNone, value } form structure), lists, tuples, and response types. Integrated into form submission handler with error display. Tested successfully with mainnet token transfer function."}
{"id":"clarigen-2j9","title":"TX Builder V2: Uint Decimal Converter Helper","description":"First field helper implementation: convert human-readable decimal amounts to uint values.","design":"When uint/int field focused, show converter:\n- Input for human amount (e.g., \"10.5\")\n- Dropdown/input for decimals (preset: 6 for STX/USDC, 8 for BTC, custom)\n- Shows converted value (e.g., \"10500000\")\n- \"Apply\" button fills the focused field\n\nUse `dnum` library (already in project) for conversion.\n\nKey files:\n- `src/components/tx-builder/helpers/uint-helper.tsx` - new component\n- `src/components/tx-builder/field-helper.tsx` - render UintHelper for uint/int types","acceptance_criteria":"- Decimal converter appears for uint/int fields\n- Preset decimals for common tokens\n- Apply button fills field value\n- Works for nested uint fields (tuple members, etc.)","status":"closed","priority":2,"issue_type":"task","assignee":"claude","created_at":"2025-12-18T08:41:25.45423-08:00","updated_at":"2025-12-18T09:34:26.095844-08:00","closed_at":"2025-12-18T09:34:26.095844-08:00","close_reason":"Implemented UintHelper component with decimal conversion for uint/int fields","dependencies":[{"issue_id":"clarigen-2j9","depends_on_id":"clarigen-t3p","type":"blocks","created_at":"2025-12-18T08:41:25.459455-08:00","created_by":"daemon"},{"issue_id":"clarigen-2j9","depends_on_id":"clarigen-adv","type":"blocks","created_at":"2025-12-18T08:41:40.387027-08:00","created_by":"daemon"}]}
{"id":"clarigen-5gu","title":"Refactor Map Reads in Clarigen Core","description":"Refactor Clarigen core to integrate map reads directly into the contract client. Move away from the separate fetchMapGet function and instead expose maps on the contract object, similar to how read-only functions are handled. This should allow for a smoother API like `client.ro(contract.maps.myMap(key))`.","design":"1. Update `functionsFactory` or create a `mapsFactory` in `packages/core/src/factory.ts` to attach map lookup helpers to the contract object.\n2. Define a new `ContractMapCall` type that represents a map lookup, similar to `ContractCall`.\n3. Update `ClarigenClient` in `packages/core/src/api/index.ts` to handle these map calls in its `ro` method (or a similar unified method).\n4. Ensure the types are correctly generated and exposed in `factory-types.ts`.\n5. Deprecate or refactor the standalone `fetchMapGet` in favor of the new integrated approach.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T11:58:18.071262-08:00","updated_at":"2025-12-17T11:58:18.071262-08:00"}
{"id":"clarigen-7w0","title":"Refine ResponseField UI in transaction builder","description":"The response type field in the transaction builder has a poor UI that doesn't match design goals. Needs refinement to match TUI aesthetic.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T10:43:33.804532-08:00","updated_at":"2025-12-18T10:43:36.827001-08:00","closed_at":"2025-12-18T10:43:36.827001-08:00","close_reason":"Refined UI with sharp edges, lowercase labels, and horizontal layout matching design goals."}
{"id":"clarigen-88m","title":"Transaction Submission, Tracking \u0026 Result Persistence","description":"Implement transaction submission via wallet, real-time tracking of confirmation status, and display of transaction results including events and return values. Persist the submission state in the URL.","design":"1. Use `@stacks/connect` to broadcast transactions for public functions.\n2. Implement a tracking hook that polls the Stacks API for transaction status.\n3. Show a 'Pending' UI while waiting for confirmation.\n4. Post-confirmation:\n   - Show Success/Failure status.\n   - Extract and display return value (if available/applicable).\n   - List generated events.\n5. Sync transaction ID to URL query params.\n6. On page reload, if txid is present, automatically show the tracking/result UI instead of the empty form.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T11:55:11.070159-08:00","updated_at":"2025-12-17T12:11:45.766942-08:00","closed_at":"2025-12-17T12:11:45.766942-08:00","close_reason":"Implemented transaction submission via Stacks Connect, stored txid in URL state, and displayed it on the page with a link to the explorer."}
{"id":"clarigen-adv","title":"TX Builder V2: Field Helper Infrastructure","description":"Create field helper component and focus tracking. Shows contextual help based on which field is focused.","design":"Track focused field via React context:\n- `FocusedFieldContext` stores `{ name: string, type: ClarityAbiType } | null`\n- Each field component calls `setFocusedField` on focus, clears on blur\n- Nested fields (tuple members, list items, optional values) report their leaf type\n\n`FieldHelper` component:\n- Reads focused field from context\n- Switches on type to render appropriate helper\n- Shows placeholder/tips when no field focused\n\nKey files:\n- `src/hooks/use-focused-field.ts` - context and hook\n- `src/components/tx-builder/field-helper.tsx` - main helper component\n- `src/components/tx-builder/fields/*.tsx` - add onFocus/onBlur handlers\n- `src/components/tx-builder/context-panel.tsx` - render FieldHelper in Builder mode","acceptance_criteria":"- Focused field tracked across all field types\n- Nested fields report correct leaf type\n- FieldHelper renders in context panel (Builder mode)\n- Placeholder shown when no field focused","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-12-18T08:41:19.926054-08:00","updated_at":"2025-12-18T09:07:25.65939-08:00","closed_at":"2025-12-18T09:07:25.65939-08:00","close_reason":"Implemented field helper infrastructure with focus tracking. Created use-focused-field.tsx hook, field-helper.tsx component, and integrated focus handlers into all primitive field components.","dependencies":[{"issue_id":"clarigen-adv","depends_on_id":"clarigen-t3p","type":"blocks","created_at":"2025-12-18T08:41:19.928363-08:00","created_by":"daemon"},{"issue_id":"clarigen-adv","depends_on_id":"clarigen-1el","type":"blocks","created_at":"2025-12-18T08:41:39.625865-08:00","created_by":"daemon"}]}
{"id":"clarigen-au1","title":"TX Builder V2: Enhanced Transaction Display","description":"Improve transaction status display with more details: execution cost, post-conditions, fees.","design":"Enhance `TransactionStatus` component:\n- Show execution cost breakdown (read/write counts, runtime)\n- Display post-conditions with human-readable format\n- Show actual fee paid\n- Better events display (not collapsed by default for small counts)\n- Sponsor info if sponsored\n\nData already available in `StacksTransaction` type (see `src/types/stacks-transaction.ts`).\n\nKey files:\n- `src/components/tx-builder/transaction-status.tsx` - add sections","acceptance_criteria":"- Execution cost visible\n- Post-conditions displayed readably\n- Fee shown\n- Events more prominent","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-18T08:41:33.456718-08:00","updated_at":"2025-12-18T08:41:33.456718-08:00","dependencies":[{"issue_id":"clarigen-au1","depends_on_id":"clarigen-t3p","type":"blocks","created_at":"2025-12-18T08:41:33.460757-08:00","created_by":"daemon"},{"issue_id":"clarigen-au1","depends_on_id":"clarigen-1el","type":"blocks","created_at":"2025-12-18T08:41:41.833772-08:00","created_by":"daemon"}]}
{"id":"clarigen-b3z","title":"Manage Post-conditions in Transaction Builder","description":"Add the ability to manage Stacks post-conditions in the transaction builder UI. Post-conditions are safety constraints attached to a transaction payload that specify allowed asset transfers.\n\nThe UI should allow users to:\n1. Add, edit, and remove multiple post-conditions.\n2. Specify the `postConditionMode` ('allow' or 'deny').\n3. Configure STX, Fungible (FT), and Non-Fungible (NFT) post-conditions.\n\nPost-condition types to support:\n```ts\nexport type FungibleComparator = 'eq' | 'gt' | 'gte' | 'lt' | 'lte';\nexport interface StxPostCondition {\n    type: 'stx-postcondition';\n    address: string;\n    condition: `${FungibleComparator}`;\n    amount: string | bigint | number;\n}\nexport type FungiblePostCondition = {\n    type: 'ft-postcondition';\n    address: string;\n    condition: `${FungibleComparator}`;\n    asset: AssetString;\n    amount: string | bigint | number;\n};\nexport type NonFungibleComparator = 'sent' | 'not-sent';\nexport type NonFungiblePostCondition = {\n    type: 'nft-postcondition';\n    address: string;\n    condition: `${NonFungibleComparator}`;\n    asset: AssetString;\n    assetId: ClarityValue;\n};\n```\n\nIntegration Requirements:\n- **URL State**: Use `nuqs` to persist post-conditions in the URL (e.g., `?pcs=...`).\n- **Wallet Integration**: Pass the built post-conditions to `stx_callContract`.\n- **UI**: A section in the transaction builder form for \"Post-conditions\".","design":"- Use `@stacks/transactions` `Pc` helper for building post-conditions from the form state.\n- Implement a `PostConditionsField` component that manages an array of post-condition objects.\n- Use `nuqs` for serializing the array of post-conditions into the URL.\n- Toggles for mode: `PostConditionMode.Deny` (default) vs `PostConditionMode.Allow`.\n- Reference for Pc usage:\n```ts\nimport { Pc, PostConditionMode } from '@stacks/transactions';\n\nconst transaction = await makeContractCall({\n  postConditions: [\n    Pc.principal('ST1ADDRESS...').willSendEq(1000000n).ustx(),\n    Pc.principal('ST2CONTRACT...').willSendGte(100n).ft('ST2CONTRACT.token-contract', 'my-token')\n  ],\n  postConditionMode: PostConditionMode.Deny,\n});\n```","acceptance_criteria":"- UI allows adding STX, FT, and NFT post-conditions.\n- STX post-conditions allow choosing comparator (eq, gt, gte, lt, lte) and amount.\n- FT post-conditions allow choosing comparator, asset (contract.name), and amount.\n- NFT post-conditions allow choosing comparator (sent, not-sent), asset, and asset ID (Clarity Value).\n- All post-condition state is reflected in the URL via `nuqs`.\n- `postConditionMode` toggle is available and defaults to `Deny`.\n- When the transaction is built/submitted, post-conditions are correctly passed to the wallet (stx_callContract).","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-17T14:31:09.641506-08:00","updated_at":"2025-12-18T10:32:28.519612-08:00","dependencies":[{"issue_id":"clarigen-b3z","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-17T14:31:12.915219-08:00","created_by":"daemon"}]}
{"id":"clarigen-c38","title":"TX Builder V2: Principal Field Helper","description":"Field helper for principal fields: use connected wallet address, future address book.","design":"When principal field focused, show:\n- \"Use connected wallet\" button (if wallet connected)\n- Shows connected address for reference\n- Future: address book / recent addresses\n\nKey files:\n- `src/components/tx-builder/helpers/principal-helper.tsx` - new component\n- `src/components/tx-builder/field-helper.tsx` - render for principal type\n- `src/hooks/use-stacks.ts` - get connected address","acceptance_criteria":"- \"Use connected wallet\" button when wallet connected\n- Button fills principal field with connected address\n- Graceful state when wallet not connected","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-18T08:41:29.202047-08:00","updated_at":"2025-12-18T08:41:29.202047-08:00","dependencies":[{"issue_id":"clarigen-c38","depends_on_id":"clarigen-t3p","type":"blocks","created_at":"2025-12-18T08:41:29.206811-08:00","created_by":"daemon"},{"issue_id":"clarigen-c38","depends_on_id":"clarigen-adv","type":"blocks","created_at":"2025-12-18T08:41:41.114913-08:00","created_by":"daemon"}]}
{"id":"clarigen-e2h","title":"Add Network/Address Mismatch Helper","description":"Detect when a user provides a Stacks address that belongs to a different network than the one specified in the route (e.g., using a Mainnet address on the Testnet route). Provide a helpful error message and a button to quickly switch to the correct network.","design":"- In the transaction builder route, extract the address prefix from `contractAddress`.\n- 'SP' indicates Mainnet; 'ST' indicates Testnet.\n- Compare this prefix with the `network` param from the URL.\n- If there is a mismatch, display a call-to-action banner: \"Did you mean to use [Opposite Network]? This address appears to be a [Detected Network] address.\"\n- Include a button that navigates to the equivalent route on the correct network.","acceptance_criteria":"- When an 'SP...' (Mainnet) address is used on a '/tx/testnet/...' route, a warning is displayed.\n- When an 'ST...' (Testnet) address is used on a '/tx/mainnet/...' route, a warning is displayed.\n- The warning includes a button to \"Switch to [Correct Network]\".\n- Clicking the button reroutes the user to the same contract and function but with the corrected network prefix.\n- The warning does not appear when the address prefix correctly matches the network.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:53:33.699787-08:00","updated_at":"2025-12-18T10:10:37.109545-08:00","closed_at":"2025-12-18T10:10:37.109545-08:00","close_reason":"Implemented network/address mismatch detection with helper banner. Added utility functions in constants.ts, NetworkMismatchBanner component, and integrated into all tx builder views. Includes unit tests.","dependencies":[{"issue_id":"clarigen-e2h","depends_on_id":"clarigen-t3p.1","type":"related","created_at":"2025-12-17T14:53:36.278546-08:00","created_by":"daemon"}]}
{"id":"clarigen-ehy","title":"Show available functions on non-existent function route","description":"Improve the UX when a user navigates to the transaction builder for a function that doesn't exist on a contract. Instead of a generic error, show a list of all available public and read-only functions for that contract to help the user find what they're looking for.","design":"- Modify the transaction builder route component to check if the contract exists but the function name is missing from the ABI.\n- Use the `useContractFunctions` hook (or similar) to fetch the list of available functions when the primary function is not found.\n- Render a list of links to `/tx/$network/$contractAddress/$functionName` for each discovered function.\n- Style the list for easy navigation (e.g., grouping by access type: public vs read-only).","acceptance_criteria":"- When navigating to a non-existent function on a valid contract, the page displays a \"Function not found\" message.\n- The page provides a list of all available public and read-only functions for that contract.\n- Each function in the list is a clickable link that navigates to the correct transaction builder route for that function.\n- The UI maintains the contract context (network and contract ID) while showing the alternative functions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:52:39.801998-08:00","updated_at":"2025-12-18T09:32:22.510186-08:00","closed_at":"2025-12-18T09:32:22.510186-08:00","close_reason":"Implemented a new component FunctionNotFound that displays a list of available public and read-only functions when a user navigates to a non-existent function route for a valid contract.","dependencies":[{"issue_id":"clarigen-ehy","depends_on_id":"clarigen-t3p.1","type":"related","created_at":"2025-12-17T14:52:42.229693-08:00","created_by":"daemon"}]}
{"id":"clarigen-f3e","title":"TX Builder V2: Mode Distinction (Builder vs Result)","description":"Add disabled/read-only form state when viewing a submitted transaction. Populate form from actual tx args, not URL params.","design":"When `txid` in URL:\n1. Fetch tx via existing `useTransaction` hook\n2. Extract `tx.contract_call.function_args` array (each has `name`, `repr`, `hex`, `type`)\n3. Parse `repr` values back to form values (or use hex → CV → form value)\n4. Pass `disabled={!!txid}` to all field components\n5. Replace \"Build Transaction\" button with \"Clone to New\"\n\nClone action: `setUrlState({ txid: null })` to clear txid, form becomes editable.\n\nKey files:\n- `src/routes/tx.$network.$contractAddress.$functionName.tsx` - add disabled prop, clone button\n- `src/components/tx-builder/fields/*.tsx` - accept and propagate `disabled` prop\n- `src/lib/clarity-form-utils.ts` - add `txArgsToFormValues()` helper","acceptance_criteria":"- Form fields disabled when txid present\n- Form values match actual tx args, not URL params\n- \"Clone to New\" button clears txid and enables editing\n- All field types support disabled state","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T08:41:08.76311-08:00","updated_at":"2025-12-18T08:47:42.460812-08:00","closed_at":"2025-12-18T08:47:42.460812-08:00","close_reason":"Implemented mode distinction between Builder and Result modes. Form fields are now disabled when viewing a transaction, and form values are populated from actual transaction arguments. Added a \"Clone to New\" button to exit Result mode.","dependencies":[{"issue_id":"clarigen-f3e","depends_on_id":"clarigen-t3p","type":"blocks","created_at":"2025-12-18T08:41:08.764419-08:00","created_by":"daemon"}]}
{"id":"clarigen-hbz","title":"Context-Aware Value History \u0026 Autocomplete","description":"Implement a history system for form values that provides autocomplete suggestions. History must be strictly scoped to the specific contract, function, and argument name to ensure relevance.","design":"1. Use LocalStorage or IndexedDB to store successful submissions.\n2. Data structure: Record\u003cContractID, Record\u003cFunctionName, Record\u003cArgName, string[]\u003e\u003e\u003e.\n3. Hook into field focus to show a dropdown of previous values.\n4. Ensure autocomplete only triggers for the specific (contract, function, arg) context.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:55:06.233466-08:00","updated_at":"2025-12-17T11:55:06.233466-08:00"}
{"id":"clarigen-l61","title":"Add form-level validation to prevent invalid submission","description":"Implement validation to ensure the tx builder form cannot be submitted unless all required fields are present and valid. Disable submit button when form has errors.","design":"Using TanStack Form's built-in validation:\n- Add validators to each field type that return error messages\n- Use form.state.canSubmit or check form.state.isValid\n- Disable SubscribeButton when form is invalid\n- Show aggregate error state (e.g., \"X fields have errors\")\n- Required fields must have non-empty values","acceptance_criteria":"- Submit button is disabled when form has validation errors\n- All required fields validate as non-empty\n- Form displays validation state clearly\n- Submission is blocked until all fields are valid","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T06:56:03.800971-08:00","updated_at":"2025-12-18T09:30:21.820843-08:00","closed_at":"2025-12-18T09:30:21.820843-08:00","close_reason":"Integrated form-level validation by disabling the submit button when the form is invalid or submitting. Field-level validators already ensure required fields are non-empty."}
{"id":"clarigen-let","title":"Package Clarigen Documentation \u0026 Tools as Claude Plugin/Skills","description":"Develop a system to package Clarigen documentation and core functionality as a Claude Plugin (using the 'skills' architecture). This includes automating the conversion of markdown docs and LLMS.txt into executable skills, ensuring they stay in sync with the codebase.","design":"1. Define the plugin structure compatible with Claude Code 'skills'.\n2. Create a script to parse documentation in `ai/` and `docs-site/` to generate skill definitions.\n3. Implement core 'skills' that wrap the Clarigen CLI (e.g., `clarigen-generate`, `clarigen-test`).\n4. Setup a 'sync' command or GitHub Action to automatically update the plugin/skills when documentation or code changes.\n5. Create an installation/distribution mechanism (e.g., `openskills` compatible) for easy developer adoption.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-17T12:05:01.68782-08:00","updated_at":"2025-12-17T12:05:01.68782-08:00"}
{"id":"clarigen-mq0","title":"Add read-only API route with URL state","description":"Implement a GET API route at `/read/$network/$contractAddress.$functionName` that parses arguments from query parameters, performs a read-only call via Stacks RPC, and returns a JSON response.\n\nThe route should support mainnet, testnet, and devnet. Arguments should be parsed based on the contract ABI (similar to how the transaction builder handles URL state).\n\nSuccess response should include:\n- `okay`: boolean\n- `result`: hex-encoded Clarity Value (from RPC)\n- `value`: JSON representation of the result\n- `clarity`: Clarity notation string of the result\n\nExample: `/read/mainnet/SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.token-abtc/get-balance?address=SP123...`\n\nKey files for context:\n- `packages/core/src/api/call-read-only.ts`: RPC call implementation\n- `web/src/lib/clarity-form-utils.ts`: Conversion logic for Clarity types\n- `web/src/hooks/use-tx-url-state.ts`: Reference for URL parameter parsing logic\n- `web/src/routes/tx.$network.$contractAddress.$functionName.tsx`: Similar route structure","acceptance_criteria":"- Route exists at `/read/$network/$contractAddress/$functionName` (where contractAddress is principal.name)\n- Supports GET requests with arguments passed as query parameters\n- Successfully fetches contract ABI and uses it to parse query parameters into Clarity Values\n- Calls the Stacks blockchain RPC for read-only function execution\n- Returns a JSON response with `okay`, `result` (hex), `value` (JSON), and `clarity` (string)\n- Correctly handles different networks (mainnet, testnet, devnet)\n- Graceful error handling for missing contracts, invalid functions, or malformed arguments\n- Reuses existing conversion utilities where possible (e.g., from `@clarigen/core` or `web/src/lib/clarity-form-utils.ts`)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T12:24:31.496068-08:00","updated_at":"2025-12-17T12:33:08.311592-08:00","closed_at":"2025-12-17T12:33:08.311592-08:00","close_reason":"Implemented the read-only API route with shared URL parsing logic. Created documentation for URL mapping and updated progress."}
{"id":"clarigen-ndt","title":"Contract Detail View \u0026 Breadcrumbs Navigation","description":"Create a contract-level view that lists all available functions, serving as an entry point for the transaction builder. Add breadcrumbs for easier navigation between network, contract, and function.","design":"1. Update routing to handle `/tx/$network/$contractAddress` (contract overview).\n2. Fetch ABI and display list of public and read-only functions.\n3. Add a Breadcrumbs component at the top of the tx builder pages:\n   - Clarigen Tools \u003e [Network] \u003e [Contract] \u003e [Function]\n4. Make elements of breadcrumbs clickable.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:55:07.650441-08:00","updated_at":"2025-12-18T05:38:20.940458-08:00","closed_at":"2025-12-18T05:38:20.940458-08:00","close_reason":"Implemented Breadcrumbs component and integrated it into the contract overview and transaction builder pages. Verified that all design requirements are met."}
{"id":"clarigen-pg1","title":"Fix text wrapping in transaction result view for post-condition failures","description":"There is a text wrapping issue in the transaction result view when a post-condition failure occurs. This needs to be fixed to ensure the error message/details are properly displayed.\n\nReproduction URL: http://localhost:2527/tx/testnet/ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM.burn-from-contract/burn-from-contract?amount=5000000\u0026native-domain=0\u0026native-recipient=0x00000000000000000000000027af410f8d787a46c71c10d6b16781c8d07d73eb\u0026txid=4cc9af7aa781a0014c2d13754733aea397b0b5a78e682b6e11faacac10f82052","acceptance_criteria":"- Error messages for post-condition failures in the transaction result view wrap correctly and do not overflow their container.\n- UI remains responsive and readable on different screen sizes.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T06:30:08.561152-08:00","updated_at":"2025-12-18T08:15:54.251038-08:00","closed_at":"2025-12-18T08:15:54.251038-08:00","close_reason":"Fixed text wrapping in TransactionStatus and TxBuilderPage by adding whitespace-pre-wrap to pre tags with break-all. Also improved status display for post-condition failures and added flex-wrap to breadcrumbs.","dependencies":[{"issue_id":"clarigen-pg1","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-18T06:30:08.564021-08:00","created_by":"daemon"}]}
{"id":"clarigen-pre","title":"Advanced Transaction Tracking \u0026 Results Display","description":"Implement real-time tracking of transaction confirmation status and display the final result (success/failure, return value, events) based on the txid in the URL state.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T12:15:47.165026-08:00","updated_at":"2025-12-17T20:57:20.568667-08:00","closed_at":"2025-12-17T20:57:20.568667-08:00","close_reason":"Implemented useTransaction hook for polling and TransactionStatus component for detailed display of transaction results including status, return value, and events. Integrated into the tx builder route."}
{"id":"clarigen-ps9","title":"Code Snippet Generation for Clarigen Functions","description":"Generate copy-pasteable code snippets for calling the current contract function using Clarigen in different environments (Tests, Web, Node.js).","design":"1. Add a 'Code' tab or section to the transaction builder.\n2. Templates for:\n   - Unit tests (Vitest/Clarigen-test)\n   - Web application (React/Hooks)\n   - Node.js script\n3. Use the current form values to pre-fill the snippet.\n4. Add a 'Copy to Clipboard' button.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-17T11:55:13.999725-08:00","updated_at":"2025-12-17T11:55:13.999725-08:00"}
{"id":"clarigen-qfp","title":"Add devnet network support and move tx builder data fetching to client-side","description":"Enable 'devnet' network option and convert server-side data loading in tx builder page to client-side fetching. This will allow using localhost-based networks by moving getContractAbi calls and function resolution from the route loader to React components.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T21:06:55.715779-08:00","updated_at":"2025-12-16T21:16:08.651676-08:00","closed_at":"2025-12-16T21:16:08.651676-08:00","close_reason":"Moved tx builder route to client-side TanStack Query fetching and enabled devnet network support with localhost API base."}
{"id":"clarigen-qii","title":"Implement response type field component","description":"Add support for the (response ok-type err-type) Clarity type in the tx builder form. This is used by public functions to commit their changes or abort. Create a new ResponseField component that handles both ok and err type branches.","design":"ResponseField should:\n- Display two sections: \"Ok value\" and \"Error value\"\n- Render nested ClarityField for both ok-type and err-type\n- Use form structure like: { ok: value, err: value }\n- Add to clarity-field.tsx dispatcher using isClarityAbiResponse() type checker\n- Follow same pattern as OptionalField for nested field context","acceptance_criteria":"- ResponseField component renders both ok and err branches\n- Nested fields properly inherit field context\n- Values serialize/deserialize correctly in URL state\n- Component integrated into clarity-field.tsx dispatcher","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T06:56:03.73719-08:00","updated_at":"2025-12-18T10:31:58.671089-08:00","closed_at":"2025-12-18T10:31:58.671089-08:00","close_reason":"Implemented ResponseField component and integrated it into the transaction builder. Updated @clarigen/core to support { isOk, ok, err } form values for responses. Moved getDefaultValueForType to a shared utility."}
{"id":"clarigen-rb6","title":"Field Helper Sidebar \u0026 Address Helpers","description":"Implement a side panel helper for the transaction builder form that provides context-aware assistance when fields are focused. Include quick-fill buttons for common addresses like the current user's address and the contract's principal.","design":"1. Add a layout shift or overlay side-panel to the right of the form.\n2. Track currently focused field in the form.\n3. For Principal fields:\n   - Show 'Your Address' button.\n   - Show 'Contract Address' button.\n4. For other fields:\n   - Show relevant helpers if applicable.\n5. Use framer-motion or simple CSS transitions for a smooth appearance.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:55:05.43301-08:00","updated_at":"2025-12-17T11:55:05.43301-08:00"}
{"id":"clarigen-rch","title":"Add field-level validation for Clarity types","description":"Implement proper validation for each Clarity type field to ensure values conform to type constraints before submission.","design":"Validation rules by type:\n- principal: Use createAddress() from @stacks/transactions, catch errors\n- trait_reference: Same as principal but must contain \".\" for contract\n- uint128: Must be non-negative integer, fit in 128 bits\n- int128: Must be valid signed integer, fit in 128 bits\n- buffer: Must be valid hex, length must not exceed max-len\n- string-ascii: Must be ASCII only (no high bytes), length check\n- string-utf8: UTF-8 length check (code points, not bytes)\n- list: Length must not exceed max-len\n- Add validation to TanStack Form field definitions using validators prop","acceptance_criteria":"- Principal fields reject invalid Stacks addresses\n- Trait reference fields require contract format (addr.contract)\n- Numeric fields enforce bit-width constraints\n- Buffer fields validate hex format and length\n- String fields enforce encoding and length limits\n- List fields enforce max length\n- Validation errors display clearly to user","notes":"Implemented field-level validation for principal, uint128, int128, buffer, string-ascii, string-utf8, and list types. Integrated with TanStack Form validators across all field components.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T06:56:03.851755-08:00","updated_at":"2025-12-18T09:29:30.695825-08:00","closed_at":"2025-12-18T09:29:30.695825-08:00","close_reason":"Implemented and verified all validation rules for Clarity types in the transaction builder."}
{"id":"clarigen-rl2","title":"CLI 'open' command \u0026 Web Contract List View","description":"Add a feature to the Clarigen CLI to open contracts in the Clarigen Tools web app. Implement a web route that can handle multiple contract IDs and display them as a list.","design":"1. CLI: New command `clarigen open` (or `clarigen web`).\n   - Reads `Clarigen.toml` or `Clarinet.toml`.\n   - Constructs a URL with all contract IDs as query params.\n   - Opens the browser (using `open` package).\n2. Web: New route `/contracts` (or similar) that accepts multiple addresses.\n3. Display a searchable list of these contracts.\n4. Clicking a contract takes user to the Contract Detail View.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:55:12.779326-08:00","updated_at":"2025-12-17T11:55:12.779326-08:00"}
{"id":"clarigen-t3p","title":"Transaction Builder Feature","description":"Build a dynamic transaction builder for Stacks smart contracts.\n\nFeature allows users to:\n1. Navigate to /tx/:network/:contractAddress/:functionName\n2. See a dynamically generated form based on the contract's ABI\n3. Fill in function arguments with type-appropriate inputs\n4. Connect wallet and sign transactions (future)\n\nKey technical details:\n- Multi-network support (mainnet/testnet)\n- Form fields for all Clarity types (int, uint, bool, principal, buffers, strings, optionals, lists, tuples)\n- URL state persistence for shareable tx links\n- Integration with @stacks/connect for wallet connection\n\nPlanning doc: web/history/tx-builder-plan.md","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-16T17:56:38.377904-08:00","updated_at":"2025-12-16T17:58:36.751778-08:00"}
{"id":"clarigen-t3p.1","title":"Setup tx builder route with param validation","description":"Create TanStack Router route at /tx/$network.$contractAddress.$functionName.tsx\n\nRoute params:\n- network: 'mainnet' | 'testnet' (validate using constants.ts Network type)\n- contractAddress: Stacks contract ID like 'SP120SBRBQJ00MCWS7TM5R8WJNTTKD5K0HFRC2CNE.usdcx-v1'\n- functionName: Name of the function to call\n\nImplementation:\n1. Create file at web/src/routes/tx/$network.$contractAddress.$functionName.tsx\n2. Use createFileRoute with loader for server-side data fetching\n3. Validate network param, throw notFound() if invalid\n4. Parse and validate contractAddress format (should contain exactly one '.')\n5. Basic page scaffold that displays the params\n\nSee web/src/routes/__root.tsx and web/src/routes/index.tsx for existing patterns.\nTanStack Router docs: file-based routing with $param syntax.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T17:56:43.735675-08:00","updated_at":"2025-12-16T18:09:51.058566-08:00","closed_at":"2025-12-16T18:09:51.058566-08:00","close_reason":"Route created at `web/src/routes/tx.$network.$contractAddress.$functionName.tsx`. Validates network (mainnet/testnet), contract address format, and function existence in ABI. Fetches ABI in loader, displays function args. See `web/history/tx-builder-progress.md` for full details.","dependencies":[{"issue_id":"clarigen-t3p.1","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-16T17:56:43.743803-08:00","created_by":"daemon"}]}
{"id":"clarigen-t3p.2","title":"Fetch contract ABI and function metadata","description":"Create TanStack Query hook to fetch contract ABI and extract function info.\n\nExisting infrastructure:\n- web/src/lib/stacks-api.ts has getContractAbi(network, contractId) already implemented\n- Returns ClarityAbi from @stacks/transactions (see packages/core/src/abi-types.ts for detailed types)\n\nImplementation:\n1. Create web/src/hooks/use-contract-abi.ts\n2. Export useContractAbi(network, contractId) hook using @tanstack/react-query\n3. Export useContractFunction(network, contractId, functionName) that:\n   - Uses useContractAbi internally\n   - Finds the function by name from abi.functions array\n   - Returns { function: ClarityAbiFunction | undefined, isLoading, error }\n4. Handle errors: contract not found, function not found\n5. Function has access type ('public' | 'read_only' | 'private') - filter to public/read_only\n\nClarityAbiFunction structure:\n{\n  name: string;\n  access: 'private' | 'public' | 'read_only';\n  args: Array\u003c{ name: string; type: ClarityAbiType }\u003e;\n  outputs: { type: ClarityAbiType };\n}","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T17:57:05.860765-08:00","updated_at":"2025-12-16T18:12:47.071098-08:00","closed_at":"2025-12-16T18:12:47.071098-08:00","close_reason":"Implemented TanStack Query hooks: useContractAbi, useContractFunction, useContractFunctions","dependencies":[{"issue_id":"clarigen-t3p.2","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-16T17:57:05.864742-08:00","created_by":"daemon"}]}
{"id":"clarigen-t3p.3","title":"Build Clarity type form field components","description":"Create form input components for each Clarity type. This is the core of the tx builder.\n\nDirectory: web/src/components/tx-builder/fields/\n\nType → Component mapping:\n- uint128, int128 → NumberField (text input, validate numeric, convert to bigint)\n- bool → BoolField (use existing Switch component)\n- principal → PrincipalField (text input, validate Stacks address format SP.../ST...)\n- trait_reference → TraitField (text input, validate contract principal format addr.contract)\n- (buff N) → BufferField (hex input, use viem fromHex/toHex, validate byte length)\n- (string-ascii N) → StringAsciiField (text input, validate ASCII chars + max length)\n- (string-utf8 N) → StringUtf8Field (text input, validate max length)\n- (optional T) → OptionalField (toggle for none + recursive child field)\n- (list N T) → ListField (add/remove buttons + array of recursive child fields)\n- (tuple {...}) → TupleField (nested group of fields for each tuple member)\n\nCreate main dispatcher: web/src/components/tx-builder/clarity-field.tsx\n- Takes ClarityAbiType and renders appropriate field component\n- Recursive for nested types (optional, list, tuple)\n\nUse type checkers from packages/core/src/clarity-types.ts:\n- isClarityAbiPrimitive, isClarityAbiBuffer, isClarityAbiOptional, etc.\n\nFollow existing form component patterns in web/src/components/form-components.tsx.\nUse useFieldContext from @tanstack/react-form.\n\nFor buffers, install viem if not present: pnpm add viem -F web","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T17:57:18.222522-08:00","updated_at":"2025-12-16T19:07:02.83071-08:00","closed_at":"2025-12-16T19:07:02.83071-08:00","close_reason":"Implemented Clarity type form field components: ClarityField dispatcher + 10 field components (NumberField, BoolField, PrincipalField, BufferField, StringAsciiField, StringUtf8Field, OptionalField, ListField, TupleField). Integrated with tx route using TanStack Form.","dependencies":[{"issue_id":"clarigen-t3p.3","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-16T17:57:18.227889-08:00","created_by":"daemon"}]}
{"id":"clarigen-t3p.4","title":"Create dynamic transaction form component","description":"Build the main transaction form that dynamically generates fields from function ABI.\n\nFile: web/src/components/tx-builder/tx-form.tsx\n\nImplementation:\n1. Accept props: { func: ClarityAbiFunction, contractId: string, network: NETWORK }\n2. Use useAppForm from web/src/hooks/form.ts with dynamic default values\n3. For each func.args, render a ClarityField component\n4. Generate default values object from args (empty strings, false for bool, etc.)\n5. On submit, use parseToCV from @clarigen/core to convert each value to ClarityValue\n6. For now, just console.log the converted values (actual tx comes later)\n\nForm value structure mirrors args:\n{ argName1: value1, argName2: value2, ... }\n\nFor nested types (tuple, list), values are nested accordingly:\n{ myTuple: { field1: 'value', field2: 123 }, myList: ['a', 'b'] }\n\nUse parseToCV(value, argType) from packages/core/src/clarity-types.ts to convert.\nHandle conversion errors gracefully with user feedback.\n\nIntegrate into the route component from task 1.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T17:57:44.805996-08:00","updated_at":"2025-12-17T06:20:24.483868-08:00","closed_at":"2025-12-17T06:20:24.483868-08:00","close_reason":"Form component already implemented - see TxBuilderForm in tx.$network.$contractAddress.$functionName.tsx","dependencies":[{"issue_id":"clarigen-t3p.4","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-16T17:57:44.807999-08:00","created_by":"daemon"}]}
{"id":"clarigen-t3p.5","title":"Integrate Stacks wallet connection","description":"Add wallet connection using @stacks/connect.\n\nReference: https://docs.stacks.co/stacks-connect/connect-wallet\n\nInstallation: pnpm add @stacks/connect -F web\n\nImplementation:\n1. Create web/src/lib/stacks-wallet.ts with wallet configuration:\n   - AppConfig with ['store_write'] permission\n   - UserSession instance\n   - Helper functions: connectWallet(), disconnectWallet(), isConnected()\n\n2. Create web/src/hooks/use-stacks-wallet.ts:\n   - useStacksWallet() hook returning { address, isConnected, connect, disconnect }\n   - Persist session across page loads\n\n3. Create web/src/components/wallet-button.tsx:\n   - Shows 'Connect Wallet' when disconnected\n   - Shows truncated address + 'Disconnect' when connected\n   - Use existing Button component\n\n4. Add WalletButton to header or tx builder page\n\nshowConnect usage:\nimport { showConnect, AppConfig, UserSession } from '@stacks/connect';\n\nconst appConfig = new AppConfig(['store_write']);\nconst userSession = new UserSession({ appConfig });\n\nshowConnect({\n  appDetails: { name: 'Clarigen Tools', icon: '/favicon.ico' },\n  onFinish: () =\u003e { /* refresh state */ },\n  userSession,\n});\n\nGet address: userSession.loadUserData().profile.stxAddress.mainnet (or testnet)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T17:58:09.575639-08:00","updated_at":"2025-12-16T20:41:42.36046-08:00","closed_at":"2025-12-16T20:41:42.36046-08:00","close_reason":"Completed wallet auth integration with @stacks/connect","dependencies":[{"issue_id":"clarigen-t3p.5","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-16T17:58:09.579754-08:00","created_by":"daemon"}]}
{"id":"clarigen-t3p.6","title":"Add URL state management with nuqs","description":"Persist form state in URL query params for shareability using nuqs.\n\nInstallation: pnpm add nuqs -F web\n\nGoal: Form values should sync to URL so users can share pre-filled tx links:\n/tx/mainnet/SP.../transfer?amount=1000\u0026recipient=SP...\n\nImplementation:\n1. Setup nuqs with TanStack Router (check nuqs docs for integration)\n2. Create custom hook: useUrlFormState(args: ClarityAbiArg[])\n   - Generates useQueryState calls for each argument\n   - Handles serialization/deserialization based on Clarity type\n3. Sync form state bidirectionally with URL params\n4. Handle complex types (tuples, lists) with JSON serialization\n\nSerialization strategy:\n- Primitives (uint, int, bool, strings): direct string representation\n- Buffers: hex string (no 0x prefix)\n- Optional: 'none' string or value\n- Lists/Tuples: JSON.stringify\n\nnuqs basic usage:\nimport { useQueryState, parseAsString, parseAsJson } from 'nuqs'\n\nconst [value, setValue] = useQueryState('key', parseAsString)\n\nConsider: nuqs may need adapter for TanStack Router - check docs.\nAlternative: use TanStack Router's built-in search params if nuqs integration is complex.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T17:58:25.592783-08:00","updated_at":"2025-12-17T06:27:54.119884-08:00","closed_at":"2025-12-17T06:27:54.119884-08:00","close_reason":"Implemented URL state management with nuqs - form values sync bidirectionally with URL query params","dependencies":[{"issue_id":"clarigen-t3p.6","depends_on_id":"clarigen-t3p","type":"parent-child","created_at":"2025-12-16T17:58:25.597039-08:00","created_by":"daemon"}]}
{"id":"clarigen-wq2","title":"Read-only Function Execution \u0026 Results Display","description":"Implement execution and result display for read-only contract functions. Use the Stacks API to call the function without a wallet and show the returned Clarity value in a readable format.","design":"1. Update the UI for read-only functions to call the newly created `/read/$network/$contractAddress.$functionName` API endpoint instead of calling the Stacks RPC directly from the client.\n2. Use the returned JSON data (`value`, `clarity`, etc.) to display the result in a rich, formatted way.\n3. Integrate this into the existing transaction builder form logic, specifically when a read-only function is detected.\n4. Replace the wallet-based 'Submit' with a direct 'Call' button for these functions.","notes":"This task now depends on the API implementation (clarigen-mq0). The UI will leverage the enhanced JSON response from our own API rather than raw RPC results.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T11:55:09.347588-08:00","updated_at":"2025-12-17T12:47:41.384182-08:00","closed_at":"2025-12-17T12:47:41.384182-08:00","close_reason":"Implemented read-only function execution using the new API route. Added result display for Clarity and JSON values. Updated submit button to show 'Call Function' and handle loading state.","dependencies":[{"issue_id":"clarigen-wq2","depends_on_id":"clarigen-mq0","type":"parent-child","created_at":"2025-12-17T12:25:22.565991-08:00","created_by":"daemon"}]}
{"id":"clarigen-zg5","title":"Fix routing collision between contract index and function routes","description":"The contract overview route was overwriting the function builder route because it was defined as a greedy parent route. Renamed it to an index route.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T05:53:14.065258-08:00","updated_at":"2025-12-18T05:53:16.941902-08:00","closed_at":"2025-12-18T05:53:16.941902-08:00","close_reason":"Renamed tx.$network.$contractAddress.tsx to tx.$network.$contractAddress.index.tsx to resolve the routing collision."}
